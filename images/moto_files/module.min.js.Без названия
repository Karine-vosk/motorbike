"use strict";angular.module("xxxx.trial",["pascalprecht.translate","ui.bootstrap","ui.router","kr.ngNamespaceUrl","xxxx.trial.external","xxxx.trial.templates","xxxx.trial.translations"]),angular.module("xxxx.trial.external",[]),angular.module("xxxx.trial.templates",[]),angular.module("xxxx.trial.translations",[]),angular.module("xxxx.trial").directive("injectorGuestAuthLogin",["$location",function(a){function b(a,b){for(var c={},d=0,e=b.length;d<e;d++)!angular.isUndefined(a[b[d]])&&angular.isString(a[b[d]])&&(c[b[d]]=a[b[d]].trim());return c}var c=b(a.search()||{},["email","password"]);return{restrict:"A",link:function(a){a.form&&angular.extend(a.form,c)}}}]),angular.module("xxxx.trial").directive("body",["$compile","xxxxTrialService",function(a,b){return{restrict:"E",compile:function(a,c){window.__site__&&(a.addClass("xxxx-trial"),b.isWebsite()?a.addClass("xxxx-engine-website"):a.addClass("xxxx-engine-admin"),a.prepend("<xxxx-trial-informer></xxxx-trial-informer>"))}}}]),angular.module("xxxx.trial").directive("form",["$compile","$state","xxxxTrialService",function(a,b,c){return{restrict:"E",compile:function(a,d){c.isEnabled()&&("app.settings.general"==b.current.name&&(a.find('label[for="address"]').parent().remove(),a.find('input[name="address"]').remove()),"app.profile"==b.current.name&&a.find('input[name="email"]').attr("disabled","disabled").wrap('<div class="form-control-container">').parent().prepend("<span class=\"field-tip\" data-uk-tooltip=\"{pos: 'top-left', animation: true, cls: 'large-tip'}\" title=\"{{ 'XXXX.TRIAL.PROFILE.TOOLTIPS.EMAIL' | translate }}\"></span>").parent().addClass("form-group_tooltip"))}}}]),angular.module("xxxx.trial").provider("xxxxTrialService",[function(){var a,b,c,d=this,e={},f={isExpired:!1,expiredDays:0};this.isEnabled=function(){return window.__site__},e.isEnabled=this.isEnabled,this.isControlPanel=function(){return!window.websiteConfig},e.isControlPanel=this.isControlPanel,this.isWebsite=function(){return!!window.websiteConfig},e.isWebsite=this.isWebsite,this.isEnabled()&&(a=window.__site__,f.expiredDays=__site__.expired_at-__site__.now,f.expiredDays=f.expiredDays/60/60/24,f.expiredDays=Math.round(f.expiredDays),f.expiredDays<=0&&(f.expiredDays=0,f.isExpired=!0)),this.isExpired=function(){return f.isExpired},e.isExpired=this.isExpired,this.getRemaining=function(){return f.expiredDays},e.getRemaining=this.getRemaining,this.getSite=function(){return a},e.getSite=this.getSite,this.setCurrentUser=function(a){b=a},this.getCurrentUser=function(){return b},e.getCurrentUser=this.getCurrentUser,this.setSystemSettings=function(a){c=a},this.getSystemSettings=function(){return c},e.getSystemSettings=this.getSystemSettings,this.getCheckoutUrl=function(){var d="http://demo.cms-guide.com/calls/checkout.php?";return d+="uid="+a.uid,a.template_number?d+="&template="+a.template_number:a.template&&a.template.number&&(d+="&template="+a.template.number),b&&b.language_code&&(d+="&locale="+b.language_code),c&&c.system&&(d+="&engine="+c.system.version+"|"+c.system.build),c&&c.website&&(d+="&theme="+c.website.theme),d+="&now="+(new Date).getTime()},e.getCheckoutUrl=this.getCheckoutUrl,this.$get=["$uibModal","$rootScope",function(a,b){return e.blockBrowser=function(c){c||(c=b);var e=c.$new();e.site=d.getSite(),e.getCheckoutUrl=d.getCheckoutUrl(),a.open({animation:!0,templateUrl:"@pluginXxxxTrial/views/site_blocked.html",backdrop:"static",scope:e,backdropClass:"xxxx-trial_modal-backdrop",windowClass:"xxxx-trial_modal-window",keyboard:!1})},e}],this.getUserLocale=function(){return"undefined"==typeof b||"undefined"===b.language_code?"en":b.language_code},e.getUserLocale=this.getUserLocale}]),angular.module("xxxx.trial").config(["$translateProvider","$stateProvider","$sceDelegateProvider","xxxxTrialServiceProvider","$namespaceUrlProvider",function(a,b,c,d,e){c.resourceUrlWhitelist(["self",new RegExp("^(http[s]?)://([^.]*)static-try([^/]+)/.+$")]),a.fallbackLanguage("en"),window.websiteConfig&&websiteConfig.preferredLanguage&&a.preferredLanguage(websiteConfig.preferredLanguage),window.app&&app.user&&app.user.language_code&&(a.preferredLanguage(app.user.language_code),d.setCurrentUser(app.user)),window.app&&app.config&&app.config.settings&&d.setSystemSettings(app.config.settings),b.state("trialExpired",{url:"/expired",title:"XXXX.TRIAL.MODAL",views:{"content@":{template:"<div></div>",controller:["xxxxTrialService",function(a){a.blockBrowser()}]}}}),app.config.path.xxxx&&e.setResource({name:"xxxx",src:app.config.path.xxxx})}]),angular.module("xxxx.trial").run(["$state","xxxxTrialService",function(a,b){b.isExpired()&&b.blockBrowser()}]),angular.module("xxxx.trial.templates",[]);